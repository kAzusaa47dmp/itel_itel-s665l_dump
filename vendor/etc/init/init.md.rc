# device/sprd/qogirl6/S665L/module/bsp/md.rc
on boot
     chmod 664 /sys/devices/virtual/input/input5/tcs3430_als_x
     chmod 664 /sys/devices/virtual/input/input5/tcs3430_als_y
     chmod 664 /sys/devices/virtual/input/input5/tcs3430_als_z
     chmod 664 /sys/devices/virtual/input/input5/tcs3430_als_ir1
     chmod 664 /sys/devices/virtual/input/input5/tcs3430_als_gain
     chmod 664 /sys/devices/virtual/input/input5/tcs3430_als_atime
     chown root system /sys/devices/virtual/input/input5/tcs3430_als_x
     chown root system /sys/devices/virtual/input/input5/tcs3430_als_y
     chown root system /sys/devices/virtual/input/input5/tcs3430_als_z
     chown root system /sys/devices/virtual/input/input5/tcs3430_als_ir1
     chown root system /sys/devices/virtual/input/input5/tcs3430_als_gain
     chown root system /sys/devices/virtual/input/input5/tcs3430_als_atime
     chmod 666 /dev/stmvl53l0_ranging
     chown system system /dev/stmvl53l0_ranging
     chown system system /sys/class/sprd_sensorhub_tp/device/psensor_enable
     chmod 660 /sys/class/sprd_sensorhub_tp/device/psensor_enable
     chown system system /sys/class/sprd_sensorhub_tp/device/psensor_flush
     chmod 660 /sys/class/sprd_sensorhub_tp/device/psensor_flush
     restorecon -R /sys/board_properties/virtualkeys.adaptive_ts
# device/sprd/mpool/product/soc/main.rc
# this main.rc is all platform rc will be used by android build system.
# this main.rc will be compiled to vendor/etc/init/init.md.rc

# create 777 folder in prodnv; prodnv is a partition that is not affected by factory reset in unisoc.
on late-fs
    mkdir /mnt/vendor/productinfo/finstatus 0777 root root
    chmod 0777 /mnt/vendor/productinfo/finstatus/finstatus.prop
    mkdir /mnt/vendor/productinfo/sarflag 0777 root root
    chmod 0777 /mnt/vendor/productinfo/sarflag/sarflag.prop

on early-init
    chmod 644 /sys/devices/soc0/soc_manufacturer
    chmod 644 /sys/devices/soc0/soc_model
    chown root system /sys/devices/soc0/soc_manufacturer
    chown root system /sys/devices/soc0/soc_model
    setprop ro.boot.product.hardware.sku 0000000

# device/sprd/mpool/module/gpu/natt/main.rc
on early-init
    setprop ro.hardware.egl "mali"

on post-fs
    #setprop ro.kernel.qemu 1
    #setprop ro.kernel.qemu.gles 0
# device/sprd/mpool/module/bsp/ko/7sreset/mfeature/kernel/kernel5.4/msoc/qogirl6/qogirl6.rc
on boot
	chown system system /sys/bus/platform/devices/64200000.spi:pmic@0:hw-reset@1bc0/hard_mode

on property:persist.vendor.eng.reset=0
	write /sys/bus/platform/devices/64200000.spi:pmic@0:hw-reset@1bc0/hard_mode 0

on property:persist.vendor.eng.reset=1
	write /sys/bus/platform/devices/64200000.spi:pmic@0:hw-reset@1bc0/hard_mode 1

# device/sprd/mpool/module/bsp/uniber/main.rc
service uniber /vendor/bin/uniber -f /vendor/etc/uniber.conf
    class main
    user root
    group root
# device/sprd/mpool/module/audio/msoc/qogirl6/qogirl6.rc
on post-fs-data
    mkdir /data/vendor/local 0751 root root
    mkdir /data/vendor/local/media 0770 audioserver system
    mkdir /data/vendor/local/media/audio_params 0770 audioserver audio
    mkdir /mnt/vendor/audio 0770 audioserver audio

on boot
    chown audioserver audio /proc/asound/sprdphonesc2730/asoc-sprd-debug
    chmod 660 /proc/asound/sprdphonesc2730/asoc-sprd-debug
# device/sprd/mpool/module/camera/main.rc
on boot
    chmod 660 /sys/devices/virtual/misc/sprd_sensor/camera_sensor_name
    chown cameraserver system /sys/devices/virtual/misc/sprd_sensor/camera_sensor_name
    chown cameraserver system /sys/devices/virtual/misc/sprd_flash/test
    chmod 660 /sys/devices/virtual/misc/sprd_flash/test

on post-fs-data
    mkdir /data/vendor/local/otpdata 0777 system root
    mkdir /mnt/vendor/productinfo/otpdata 0777 system root
    mkdir /data/vendor/cameraserver 0700 cameraserver cameraserver

#modify permission for flashlight attributes file
    chown cameraserver system /sys/devices/virtual/misc/sprd_flash/test
    chmod 660 /sys/devices/virtual/misc/sprd_flash/test

#[ITD] modify remosaic flow by yingwei.cao 20220216 start
service remosaic_daemon /vendor/bin/remosaic_daemon
class late_start
user camera
group camera
#[ITD] modify remosaic flow by yingwei.cao 20220216 end
# device/sprd/mpool/module/display/main.rc
on early-boot
#for Display
    chmod 0660 /sys/class/display/dphy0/hop
    chmod 0660 /sys/class/display/dphy0/ssc
    chmod 0660 /sys/class/display/panel0/name
    chmod 666 /sys/class/display/dispc0/vsync_rate_report
    chmod 0660 /sys/class/display/dispc0/disable_flip
    chmod 0660 /sys/class/display/dispc0/bg_color
    chmod 0660 /sys/class/display/dispc0/refresh
    chmod 0660 /sys/class/display/dispc0/disable_flip
    chmod 0664 /sys/class/display/dispc0/irq_register
    chmod 0664 /sys/class/display/dispc0/irq_unregister
    chmod 0664 /sys/class/display/panel0/esd_check_enable
    chmod 0664 /sys/class/backlight/sprd_backlight/brightness
    chown cameraserver system /sys/class/display/dispc0/bg_color
    chown cameraserver system /sys/class/display/dispc0/refresh
    chown cameraserver system /sys/class/display/dispc0/disable_flip
    chown system system /sys/class/backlight/sprd_backlight/brightness
    chown system system /sys/class/display/dphy0/hop
    chown system system /sys/class/display/dphy0/ssc
    chown system system /sys/class/display/panel0/name
    chown system system /sys/class/display/panel0/resolution
    chown system system /sys/class/display/panel0/esd_check_enable
    chown system system /sys/class/display/dispc0/vsync_rate_report
    chown system system /sys/class/display/dispc0/disable_flip
    chown system system /sys/class/display/dispc0/dpu_version
    chown system system /sys/class/display/dispc0/irq_register
    chown system system /sys/class/display/dispc0/irq_unregister
    chown graphics system /sys/class/display/dispc0/vsync_rate_report
    chown system system /sys/class/display/dispc0/low_res_simu
    chmod 664 /sys/class/display/dispc0/PQ/slp
    chmod 664 /sys/class/display/dispc0/PQ/cm
    chmod 664 /sys/class/display/dispc0/PQ/gamma
    chmod 664 /sys/class/display/dispc0/PQ/hsv
    chmod 664 /sys/class/display/dispc0/PQ/epf
    chmod 664 /sys/class/display/dispc0/PQ/scl
    chmod 664 /sys/class/display/dispc0/PQ/enable
    chmod 664 /sys/class/display/dispc0/PQ/disable
    chown system system /sys/class/display/dispc0/PQ/slp
    chown system system /sys/class/display/dispc0/PQ/cm
    chown system system /sys/class/display/dispc0/PQ/gamma
    chown system system /sys/class/display/dispc0/PQ/hsv
    chown system system /sys/class/display/dispc0/PQ/epf
    chown system system /sys/class/display/dispc0/PQ/scl
    chown system system /sys/class/display/dispc0/PQ/enable
    chown system system /sys/class/display/dispc0/PQ/disable
    chown system system /sys/class/backlight/sprd_backlight/brightness
    chown system system /sys/class/backlight/sprd_backlight/max_brightness

on boot
#for display disable_flip file
    chown cameraserver system /sys/class/display/dispc0/disable_flip
#lcd for power optimization
    chown system system /sys/devices/platform/soc/soc:mm/63000000.dpu/display/dispc0/frame_count
    chmod 0664 /sys/devices/platform/soc/soc:mm/63000000.dpu/display/dispc0/frame_count

    chown system system /sys/devices/platform/soc/soc:mm/20300000.dpu/display/dispc0/frame_count
    chmod 0664 /sys/devices/platform/soc/soc:mm/20300000.dpu/display/dispc0/frame_count

    chown system system /sys/devices/platform/soc/soc:ap-ahb/31000000.dpu/display/dispc0/frame_count
    chmod 0664 /sys/devices/platform/soc/soc:ap-ahb/31000000.dpu/display/dispc0/frame_count


on fs
    #Allow others to read fb devices
    chmod 660 /dev/graphics/fb0
    chmod 660 /dev/fb0
    chmod 666 /dev/adf0
    chmod 666 /dev/adf-interface0.0
    chmod 666 /dev/adf-overlay-engine0.0

# device/sprd/mpool/module/display/msoc/qogirl6/qogirl6.rc
on early-boot
    chmod 0660 /sys/class/display/dphy0/hop
    chmod 0660 /sys/class/display/dphy0/ssc
    chmod 0660 /sys/class/display/panel0/name
    chmod 666 /sys/class/display/dispc0/vsync_rate_report
    chmod 0660 /sys/class/display/dispc0/bg_color
    chmod 0660 /sys/class/display/dispc0/refresh
    chmod 0660 /sys/class/display/dispc0/disable_flip
    chmod 0664 /sys/class/backlight/sprd_backlight/brightness

    chown system system /sys/class/display/dphy0/hop
    chown system system /sys/class/display/dphy0/ssc
    chown system system /sys/class/display/panel0/name
    chown system system /sys/class/display/dispc0/vsync_rate_report
    chown graphics system /sys/class/display/dispc0/vsync_rate_report
    chown cameraserver system /sys/class/display/dispc0/bg_color
    chown cameraserver system /sys/class/display/dispc0/refresh
    chown cameraserver system /sys/class/display/dispc0/disable_flip

    chown system system /sys/class/backlight/sprd_backlight/brightness
    chown system system /sys/class/backlight/sprd_backlight/max_brightness
    chown system system /dev/iq_mem
    chown system system /sys/devices/sprd-adf/dispc0/dynamic_pclk
    chown system system /sys/devices/sprd-adf/dispc0/dynamic_mipi_clk
    chown system system /dev/sprd_bm
    chown system system /dev/dmc_mpu

    chmod 777 /mnt/vendor/enhance
    chmod 664 /sys/class/display/dispc0/PQ/slp
    chmod 667 /sys/class/display/dispc0/PQ/cm
    chmod 664 /sys/class/display/dispc0/PQ/gamma
    chmod 664 /sys/class/display/dispc0/PQ/hsv
    chmod 664 /sys/class/display/dispc0/PQ/epf
    chmod 664 /sys/class/display/dispc0/PQ/scl
    chmod 664 /sys/class/display/dispc0/PQ/ltm
    chmod 664 /sys/class/display/dispc0/PQ/lut3d
    chmod 664 /sys/class/display/dispc0/PQ/enable
    chmod 664 /sys/class/display/dispc0/PQ/disable
    chmod 664 /sys/class/display/dispc0/PQ/cabc_mode
    chmod 664 /sys/class/display/dispc0/PQ/cabc_hist
    chmod 664 /sys/class/display/dispc0/PQ/cabc_gain
    chmod 664 /sys/class/display/dispc0/PQ/cabc_bl_fix
    chmod 664 /sys/class/display/dispc0/PQ/cabc_cur_bl
    chmod 664 /sys/class/display/dispc0/PQ/vsync_count
    chmod 664 /sys/class/display/dispc0/PQ/frame_no
    chmod 664 /sys/class/display/dispc0/PQ/cabc_param
    chmod 664 /sys/class/display/dispc0/PQ/cabc_run
    chmod 664 /sys/class/display/dispc0/PQ/cabc_state
    chmod 664 /sys/class/display/panel0/resolution
    chown system system /sys/class/display/dispc0/PQ/slp
    chown system system /sys/class/display/dispc0/PQ/cm
    chown system system /sys/class/display/dispc0/PQ/gamma
    chown system system /sys/class/display/dispc0/PQ/hsv
    chown system system /sys/class/display/dispc0/PQ/epf
    chown system system /sys/class/display/dispc0/PQ/scl
    chown system system /sys/class/display/dispc0/PQ/ltm
    chown system system /sys/class/display/dispc0/PQ/lut3d
    chown system system /sys/class/display/dispc0/PQ/enable
    chown system system /sys/class/display/dispc0/PQ/disable
    chown system system /sys/class/display/dispc0/PQ/cabc_mode
    chown system system /sys/class/display/dispc0/PQ/cabc_hist
    chown system system /sys/class/display/dispc0/PQ/cabc_gain
    chown system system /sys/class/display/dispc0/PQ/cabc_bl_fix
    chown system system /sys/class/display/dispc0/PQ/cabc_cur_bl
    chown system system /sys/class/display/dispc0/PQ/cabc_param
    chown system system /sys/class/display/dispc0/PQ/cabc_run
    chown system system /sys/class/display/dispc0/PQ/vsync_count
    chown system system /sys/class/display/dispc0/PQ/frame_no
    chown system system /sys/class/display/dispc0/PQ/cabc_state

on boot

# device/sprd/mpool/module/modem/main.rc
on early-boot
#FOR Cproc Driver
    chmod 660 /proc/cptl/wdtirq
    chmod 660 /proc/cptl/stop
    chmod 660 /proc/cptl/start
    chmod 660 /proc/cptl/modem
    chmod 660 /proc/cptl/deltanv
    chmod 660 /proc/cptl/gdsp
    chmod 660 /proc/cptl/ldsp
    chmod 660 /proc/cptl/cdsp
    chmod 660 /proc/cptl/fixnv
    chmod 660 /proc/cptl/runnv
    chmod 660 /proc/cptl/cpcmdline
    chmod 660 /proc/cptl/modemassert
    chmod 440 /proc/cptl/ddr_smem
    chmod 440 /proc/pmic/aon_iram
    chmod 440 /proc/cptl/ldinfo
    chmod 440 /proc/cptl/mini_dump
    chmod 440 /proc/cptl/mem
    chown system root /proc/cptl/modemassert
    chown system root /proc/cptl/ddr_smem
    chown system root /proc/pmic/aon_iram
    chown system root /proc/cptl/wdtirq
    chown system root /proc/cptl/stop
    chown system root /proc/cptl/start
    chown system root /proc/cptl/modem
    chown system root /proc/cptl/deltanv
    chown system root /proc/cptl/ldsp
    chown system root /proc/cptl/gdsp
    chown system root /proc/cptl/cdsp
    chown system root /proc/cptl/fixnv
    chown system root /proc/cptl/runnv
    chown system root /proc/cptl/cpcmdline
    chown system root /proc/cptl/ldinfo
    chown system system /proc/cptl/mini_dump
    chown system system /proc/cptl/mem

#FOR Modem Loader Driver
    chmod 660 /dev/modem
    chmod 660 /dev/phycp
    chmod 660 /dev/pmsys
    chmod 660 /dev/chsys
    chmod 660 /dev/mdm_ctrl
    chmod 664 /dev/sctl_ch
    chmod 444 /sys/devices/platform/spool@0/base_addr
    chmod 444 /sys/devices/platform/spool@1/base_addr
    chown system system /dev/modem
    chown system system /dev/phycp
    chown system system /dev/pmsys
    chown system system /dev/chsys
    chown system root /dev/mdm_ctrl
    chown system system /dev/sctl_ch
    chown system system /sys/devices/platform/spool@0/base_addr
    chown system system /sys/devices/platform/spool@1/base_addr

#FOR CP DUMP Driver
    chmod 660 /dev/cp_dump
    chown system system /dev/cp_dump

#DBG LOG Ctrl
    chmod 0660 /sys/class/modem/debug-log/freq
    chmod 0660 /sys/class/modem/debug-log/channel
    chown system system /sys/class/modem/debug-log/freq
    chown system system /sys/class/modem/debug-log/channel

    chmod 0664 /dev/sctl_pm
    chmod 0664 /dev/iq_mem
    chown system system /dev/iq_mem

    chown system system /dev/sctl_pm
    chown system system /proc/mdbg
    chown system root /proc/mdbg/assert
    chown system root /proc/mdbg/wdtirq
    chown system system /proc/mdbg/at_cmd
    chown system root /proc/mdbg/loopcheck
    chmod 770 /proc/mdbg
    chmod 760 /proc/mdbg/assert
    chmod 760 /proc/mdbg/wdtirq
    chmod 760 /proc/mdbg/at_cmd
    chmod 760 /proc/mdbg/loopcheck

# SIPC state files
    chown system root /sys/kernel/debug/sipc/mbox
    chown system root /sys/kernel/debug/sipc/sblock
    chown system root /sys/kernel/debug/sipc/sbuf
    chown system root /sys/kernel/debug/sipc/sipx
    chown system root /sys/kernel/debug/sipc/smem
    chown system root /sys/kernel/debug/sipc/smsg
# device/sprd/mpool/module/security/main.rc
on early-boot
    # Update dm-verity state and set partition.*.verified properties
    verity_update_state
# device/sprd/mpool/module/thermal/main.rc
on boot
    mkdir /data/vendor/thermald 0770 system system
    chown system system /data/vendor/thermald

    chown system system /sys/class/power_supply/battery/charge_control_limit
    chmod 0644 /sys/class/backlight/sprd_backlight/max_brightness
# device/sprd/mpool/module/thermal/msoc/qogirl6/qogirl6.rc
on boot
	chown system system /sys/class/thermal/thermal_zone3/trip_point_0_temp
	chown system system /sys/class/thermal/thermal_zone3/trip_point_1_temp

	chown system system /sys/class/thermal/cooling_device2/min_core_num
	chown system system /sys/class/thermal/cooling_device2/min_freq
	chown system system /sys/class/thermal/cooling_device2/max_ctrl_temp
	chown system system /sys/class/thermal/cooling_device3/min_core_num
	chown system system /sys/class/thermal/cooling_device3/min_freq
	chown system system /sys/class/thermal/cooling_device3/max_ctrl_temp

	chown system system /sys/class/thermal/thermal_zone3/policy
	chmod 660 /sys/class/thermal/thermal_zone3/policy
	write /sys/class/thermal/thermal_zone3/policy "power_allocator"

	#for ipa of EngineerMode
	chown system system /sys/class/thermal/thermal_zone3/thm_enable
	chmod 660 /sys/class/thermal/thermal_zone3/thm_enable

on property:persist.sys.thermal.ipa=0
	write /sys/class/thermal/thermal_zone3/thm_enable 0

on property:persist.sys.thermal.ipa=1
	write /sys/class/thermal/thermal_zone3/thm_enable 1
# device/sprd/mpool/module/gpu/main.rc
# hwui cache adapter ram size
on property:ro.vendor.ramsize=512M
    setprop ro.vendor.hwui.texture_cache_size 36
on property:ro.vendor.ramsize=768M
    setprop ro.vendor.hwui.texture_cache_size 36
on property:ro.vendor.ramsize=1024M
    setprop ro.vendor.hwui.texture_cache_size 36
on property:ro.vendor.ramsize=1536M
    setprop ro.vendor.hwui.texture_cache_size 48
on property:ro.vendor.ramsize=2048M
    setprop ro.vendor.hwui.texture_cache_size 56
on property:ro.vendor.ramsize=3072M
    setprop ro.vendor.hwui.texture_cache_size 72
on property:ro.vendor.ramsize=4096M
    setprop ro.vendor.hwui.texture_cache_size 72
# device/sprd/mpool/module/media/main.rc
on post-fs-data
    mkdir /mnt/vendor/enhance 0771 system system
    mkdir /data/vendor/mediacodec 0770 mediacodec mediacodec
# device/sprd/mpool/module/memory/main.rc
on property:vendor.modem.sp-boot=1
    # for devfreq ddr, after cm4 boot to setprop vendor.modem.ddr-dvfs
    chmod 220 /sys/class/devfreq/scene-frequency/sprd-governor/scenario_dfs
    chown cameraserver system /sys/class/devfreq/scene-frequency/sprd-governor/scenario_dfs
    chmod 220 /sys/class/devfreq/scene-frequency/sprd-governor/exit_scene
    chown cameraserver system /sys/class/devfreq/scene-frequency/sprd-governor/exit_scene
    chmod 220 /sys/class/devfreq/scene-frequency/sprd-governor/scene_boost_dfs
    chown cameraserver system /sys/class/devfreq/scene-frequency/sprd-governor/scene_boost_dfs
    chmod 220 /sys/class/devfreq/scene-frequency/sprd-governor/scene_freq_set
    chown cameraserver system /sys/class/devfreq/scene-frequency/sprd-governor/scene_freq_set
# device/sprd/mpool/module/memory/lmkd/main.rc
# device/sprd/mpool/module/power/battery/battery.rc
on post-fs-data
    mkdir /mnt/vendor/battery 0771 system root
    mkdir /mnt/vendor/battery/calibration_data 0770 system root

#for jeita
on property:persist.vendor.eng.jeita=0
    write /sys/class/power_supply/battery/charger.0/jeita_control 0

on property:persist.vendor.eng.jeita=1
    write /sys/class/power_supply/battery/charger.0/jeita_control 1

on early-boot
# chown for engineermode
    chown system system /sys/class/power_supply/battery/stop_charge
    chmod 0664 /sys/class/power_supply/battery/stop_charge
    chmod 0664 /sys/class/power_supply/battery/charger.0/stop_charge
    chmod 660 /sys/class/power_supply/battery/charger.0/jeita_control
    chmod 0666 /sys/class/power_supply/sprdfgu/cc_test_cmd
    chmod 660 /sys/class/power_supply/battery/input_current_limit
    chmod 660 /sys/class/power_supply/battery/constant_charge_current
# device/sprd/mpool/module/power/charge/charge.rc
on charger
    load_persist_props

on post-fs-data
    mkdir /mnt/vendor/battery 0771 system root
    mkdir /mnt/vendor/battery/calibration_data 0770 system root
# device/sprd/mpool/module/power/pmic/pmic.rc
on early-boot
    chmod 660 /proc/pmic/stop
    chmod 660 /proc/pmic/start
    chmod 660 /proc/pmic/pm_sys
    chmod 440 /proc/pmic/mem
    chmod 660 /proc/pmic/status
    chmod 660 /proc/pmic/wdtirq
    # chmod 666 root /proc/pmic/cali_lib
    chmod 660 /proc/pmic/ldinfo
    chown system root /proc/pmic/stop
    chown system root /proc/pmic/start
    chown system root /proc/pmic/pm_sys
    chown system root /proc/pmic/mem
    chown system root /proc/pmic/status
    chown system root /proc/pmic/wdtirq
    chown system root /proc/pmic/cali_lib
    chown system root /proc/pmic/ldinfo
# device/sprd/mpool/module/sensor/mfeature/kernel/kernel5.4/kernel5.4.rc
# device/sprd/mpool/module/sensor/main.rc
on early-boot
    chown system root /sys/bus/iio/devices/trigger0/name
    chown system root /sys/class/sprd_sensorhub/sensor_hub/iio/buffer
    chown system root /sys/class/sprd_sensorhub/sensor_hub/iio/buffer/length
    chown system root /sys/class/sprd_sensorhub/sensor_hub/iio/buffer/enable
    chown system root /sys/class/sprd_sensorhub/sensor_hub/iio/trigger/current_trigger
    chmod 660 /sys/bus/iio/devices/trigger0/name
    chmod 660 /sys/class/sprd_sensorhub/sensor_hub/iio/buffer/length
    chmod 660 /sys/class/sprd_sensorhub/sensor_hub/iio/buffer/enable
    chmod 660 /sys/class/sprd_sensorhub/sensor_hub/iio/trigger/current_trigger
    chown system root /sys/class/sprd_sensorhub/sensor_hub/iio/name
    chmod 660 /sys/class/sprd_sensorhub/sensor_hub/iio/name

    chown system root /sys/module/sensorhub/parameters/gryo_firms
    chown system root /sys/module/sensorhub/parameters/acc_firms
    chown system root /sys/module/sensorhub/parameters/mag_firms
    chown system root /sys/module/sensorhub/parameters/pressure_firms
    chown system root /sys/module/sensorhub/parameters/light_firms
    chown system root /sys/module/sensorhub/parameters/prox_firms
    chown system root /sys/module/sensorhub/parameters/color_temp_firms
    chown system root /sys/module/firmware_class/parameters/path
    chmod 660     /sys/module/sensorhub/parameters/gryo_firms
    chmod 660     /sys/module/sensorhub/parameters/acc_firms
    chmod 660     /sys/module/sensorhub/parameters/mag_firms
    chmod 660     /sys/module/sensorhub/parameters/pressure_firms
    chmod 660     /sys/module/sensorhub/parameters/light_firms
    chmod 660     /sys/module/sensorhub/parameters/prox_firms
    chmod 660     /sys/module/sensorhub/parameters/color_temp_firms
    chmod 660     /sys/module/firmware_class/parameters/path

on post-fs-data
    mkdir /mnt/vendor/sensorhub 0770 system root
    mkdir /mnt/vendor/productinfo/sensor_calibration_data 0770 system root
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/acc
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/mag
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/gyro
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/light
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/proximity
    chown system system /sys/class/sprd_sensorhub/sensor_hub/nv_cali_data_download
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/ps_cali
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/als_cali
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/sar
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/acc
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/mag
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/gyro
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/light
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/proximity
    chmod 666 /sys/class/sprd_sensorhub/sensor_hub/nv_cali_data_download
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/ps_cali
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/als_cali
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/sar

on factorytest-fs
    mkdir /mnt/vendor/sensorhub 0770 system root
    mkdir /mnt/vendor/productinfo 0771 system root
    mkdir /mnt/vendor/productinfo/sensor_calibration_data 0770 system root
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/acc
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/mag
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/gyro
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/light
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/proximity
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/sar
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/acc
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/mag
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/gyro
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/light
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/proximity
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/sar

on cali-fs
    chown system root /sys/bus/iio/devices/trigger0/name
    chown system root /sys/class/sprd_sensorhub/sensor_hub/iio/buffer
    chown system root /sys/class/sprd_sensorhub/sensor_hub/iio/buffer/length
    chown system root /sys/class/sprd_sensorhub/sensor_hub/iio/buffer/enable
    chown system root /sys/class/sprd_sensorhub/sensor_hub/iio/trigger/current_trigger
    chmod 660 /sys/bus/iio/devices/trigger0/name
    chmod 660 /sys/class/sprd_sensorhub/sensor_hub/iio/buffer/length
    chmod 660 /sys/class/sprd_sensorhub/sensor_hub/iio/buffer/enable
    chmod 660 /sys/class/sprd_sensorhub/sensor_hub/iio/trigger/current_trigger
    chown system root /sys/class/sprd_sensorhub/sensor_hub/iio/name
    chmod 660 /sys/class/sprd_sensorhub/sensor_hub/iio/name

    chown system root /sys/module/sensorhub/parameters/gryo_firms
    chown system root /sys/module/sensorhub/parameters/acc_firms
    chown system root /sys/module/sensorhub/parameters/mag_firms
    chown system root /sys/module/sensorhub/parameters/pressure_firms
    chown system root /sys/module/sensorhub/parameters/light_firms
    chown system root /sys/module/sensorhub/parameters/prox_firms
    chown system root /sys/module/sensorhub/parameters/color_temp_firms
    chown system root /sys/module/firmware_class/parameters/path
    chmod 660     /sys/module/sensorhub/parameters/gryo_firms
    chmod 660     /sys/module/sensorhub/parameters/acc_firms
    chmod 660     /sys/module/sensorhub/parameters/mag_firms
    chmod 660     /sys/module/sensorhub/parameters/pressure_firms
    chmod 660     /sys/module/sensorhub/parameters/light_firms
    chmod 660     /sys/module/sensorhub/parameters/prox_firms
    chmod 660     /sys/module/sensorhub/parameters/color_temp_firms
    chmod 660     /sys/module/firmware_class/parameters/path

on cali-start
    mkdir /mnt/vendor/sensorhub 0770 system root
    mkdir /mnt/vendor/productinfo/sensor_calibration_data 0770 system root
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/acc
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/mag
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/gyro
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/light
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/proximity
    chown system root /mnt/vendor/productinfo/sensor_calibration_data/sar
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/acc
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/mag
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/gyro
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/light
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/proximity
    chmod 660 /mnt/vendor/productinfo/sensor_calibration_data/sar
    start vendor.sensors-hal-1-0
# device/sprd/mpool/module/usb/main.rc
on init
# SPRD: add for OTG usb disk @{
    mkdir /mnt/media_rw/usbdisk 0700 media_rw media_rw
    mkdir /storage/usbdisk 0700 system system
    symlink /storage/usbdisk /mnt/usbdisk
# @}
# device/sprd/mpool/module/wcn/main.rc
on post-fs-data
    mkdir /mnt/vendor/wcn 0771 system root

# device/sprd/mpool/module/wcn/gnss/main.rc
on post-fs-data
#add gnss dir
    mkdir /data/vendor/gnss/ 0776 system system
    mkdir /data/vendor/gnss/bin/ 0776 system system
    mkdir /data/vendor/gnss/supl/ 0776 system system
    mkdir /data/vendor/gnss/config/ 0776 system system
    mkdir /data/vendor/gnss/lte/ 0776 system system
    chown system system /data/vendor/gnss/bin/gnssmodem.bin
    chown system system /data/vendor/gnss/config/config.xml
    chown system system /data/vendor/gnss/supl/supl.xml
    chown system system /data/vendor/gnss/supl/spirentroot.cer
    chown system system /data/vendor/gnss/lte/ext.eph
    chown system system /data/vendor/gnss/lte/jpleph.405
    chown system system /data/vendor/gnss/lte/raw.obs
    chown system system /data/vendor/gnss/gnss.log
    chown system system /data/vendor/gnss/nmea.log
    chown system system /mnt/vendor/tsx.dat
    chown system system /mnt/vendor/txdata.txt
    chown system system /data/vendor/gnss/FlashCfg.cg
    chmod 666 /data/vendor/gnss/bin/gnssmodem.bin
    chmod 666 /data/vendor/gnss/config/config.xml
    chmod 660 /data/vendor/gnss/supl/supl.xml
    chmod 660 /data/vendor/gnss/supl/spirentroot.cer
    chmod 666 /data/vendor/gnss/lte/ext.eph
    chmod 666 /data/vendor/gnss/lte/jpleph.405
    chmod 660 /data/vendor/gnss/lte/raw.obs
    chmod 666 /data/vendor/gnss/gnss.log
    chmod 666 /data/vendor/gnss/nmea.log
    chown system system /mnt/vendor/tsx.dat
    chown system system /mnt/vendor/txdata.txt
    chmod 666 /data/vendor/gnss/FlashCfg.cg

on boot
    chown system system /sys/class/misc/gnss_common_ctl/gnss_power_enable
    chown system system /sys/class/misc/gnss_common_ctl/gnss_dump
    chown system system /sys/class/misc/gnss_common_ctl/gnss_subsys
    chown system system /dev/gnss_pmnotify_ctl
    chmod  220 /sys/class/misc/gnss_common_ctl/gnss_power_enable
    chmod 660 /sys/class/misc/gnss_common_ctl/gnss_dump
    chmod 660 /sys/class/misc/gnss_common_ctl/gnss_subsys
    chmod 660  /dev/gnss_pmnotify_ctl

service gpsd /vendor/bin/gpsd
    class core
    user system
    group gps system shell inet net_raw wifi
# device/sprd/mpool/module/wcn/wifi/main.rc
on post-fs-data
#add wifi dir
	mkdir /data/vendor/wifi/ 0770 wifi wifi
	mkdir /data/vendor/wifi/wpa 0770 wifi wifi
	mkdir /data/vendor/wifi/wpa/sockets 0770 wifi wifi
	mkdir /etc/wifi 0770 wifi wifi
	write /data/vendor/wifi/fwpath sta_mode
	chmod 660 /data/vendor/wifi/fwpath
	chown wifi wifi /data/vendor/wifi/fwpath
	setprop wifi.interface wlan0
	setprop wifi.direct.interface p2p-dev-wlan0
	setprop ro.vendor.wifi.sap.interface wlan0

service p2p_supplicant /vendor/bin/hw/wpa_supplicant \
    -iwlan0 -Dnl80211 -c/data/vendor/wifi/wpa/wpa_supplicant.conf \
    -m/data/vendor/wifi/wpa/p2p_supplicant.conf \
    -puse_p2p_group_interface=1p2p_device=1 \
    -e/data/vendor/wifi/wpa/entropy.bin -g@android:wpa_wlan0 -dd
    #   we will start as root and wpa_supplicant will switch to user wifi
    #   after setting up the capabilities required for WEXT
    #   user wifi
    #   group wifi inet keystore
    class main
    socket wpa_wlan0 dgram 660 wifi wifi
    disabled
    oneshot

service vendor.wpa_supplicant /vendor/bin/hw/wpa_supplicant \
    -Dnl80211 -iwlan0 -c/data/vendor/wifi/wpa/wpa_supplicant.conf \
    -e/data/vendor/wifi/entropy.bin -g@android:wpa_wlan0 -dd
    group system wifi inet keystore
    socket wpa_wlan0 dgram 660 wifi wifi
    disabled
    oneshot
# device/sprd/mpool/module/ts/main.rc
on boot
    chmod 664 /sys/touchscreen/ts_suspend
    chown root system /sys/touchscreen/ts_suspend
# device/sprd/mpool/module/performance/mfeature/kernel/kernel5.4/kernel5.4.rc
on init
	# EAS uclamp interfaces
	#
	mkdir /dev/cpuctl/foreground
	mkdir /dev/cpuctl/background
	mkdir /dev/cpuctl/top-app
	mkdir /dev/cpuctl/rt
	chown system system /dev/cpuctl
	chown system system /dev/cpuctl/foreground
	chown system system /dev/cpuctl/background
	chown system system /dev/cpuctl/top-app
	chown system system /dev/cpuctl/rt
	chown system system /dev/cpuctl/tasks
	chown system system /dev/cpuctl/foreground/tasks
	chown system system /dev/cpuctl/background/tasks
	chown system system /dev/cpuctl/top-app/tasks
	chown system system /dev/cpuctl/rt/tasks
	chmod 0664 /dev/cpuctl/tasks
	chmod 0664 /dev/cpuctl/foreground/tasks
	chmod 0664 /dev/cpuctl/background/tasks
	chmod 0664 /dev/cpuctl/top-app/tasks
	chmod 0664 /dev/cpuctl/rt/tasks

# Set sched_util_clamp_min_rt_default 0 after boot_completed
on property:sys.boot_completed=1
	write /proc/sys/kernel/sched_util_clamp_min_rt_default 0
# device/sprd/mpool/module/performance/main.rc
on boot
    chown media system /sys/kernel/hmp/boost
    chown system system /sys/kernel/hmp/boostpulse
    chown media system /sys/kernel/hmp/packing_boost
    chown system system /sys/kernel/hmp/packing_boostpulse
    chown system system /sys/kernel/hmp/boostpulse_duration
    chmod 660 /sys/kernel/hmp/boost
    chmod 660 /sys/kernel/hmp/boostpulse
    chmod 660 /sys/kernel/hmp/packing_boost
    chmod 660 /sys/kernel/hmp/packing_boostpulse
    chmod 660 /sys/kernel/hmp/boostpulse_duratio

    # for power-hint HAL
    # Cpu hotplug boost
    chown system system /sys/devices/system/cpu/cpuhotplug/boostpulse
    chown system system /sys/devices/system/cpu/cpuhotplug/boostpulse_duration
    chmod 0660 /sys/devices/system/cpu/cpuhotplug/boostpulse
    chmod 0660 /sys/devices/system/cpu/cpuhotplug/boostpulse_duration
    chown system system /sys/devices/system/cpu/cpuhotplug/cluster0_core_max_limit
    chown system system /sys/devices/system/cpu/cpuhotplug/cluster0_core_min_limit
    chmod 0660 /sys/devices/system/cpu/cpuhotplug/cluster0_core_max_limit
    chmod 0660 /sys/devices/system/cpu/cpuhotplug/cluster0_core_max_limit

    # For DVFS
    chown system system /dev/cluster0_freq_min
    chown system system /dev/cluster0_freq_max
    chown system system /dev/cluster1_freq_min
    chown system system /dev/cluster1_freq_max
    chmod 0660 /dev/cluster0_freq_min
    chmod 0660 /dev/cluster0_freq_max
    chmod 0660 /dev/cluster1_freq_min
    chmod 0660 /dev/cluster1_freq_max

on early-boot
    #add for engineermode
    chown system system /sys/devices/system/cpu/cpufreq/policy0/scaling_governor
    chown system system /sys/devices/system/cpu/cpufreq/policy0/scaling_setspeed
    chmod 664 /sys/devices/system/cpu/cpufreq/policy0/scaling_governor
    chown system system /sys/devices/system/cpu/cpufreq/policy4/scaling_governor
    chown system system /sys/devices/system/cpu/cpufreq/policy4/scaling_setspeed
    chmod 664 /sys/devices/system/cpu/cpufreq/policy4/scaling_governor
# device/sprd/mpool/module/performance/msoc/qogirl6/qogirl6.rc
on init
    # setup final cpuset
    write /dev/cpuset/top-app/cpus 0-7
    write /dev/cpuset/foreground/cpus 0-7
    write /dev/cpuset/background/cpus 0-3
    write /dev/cpuset/system-background/cpus 0-5

on late-init
    #setup scheduler parameters
    write /dev/cpuctl/top-app/cpu.uclamp.min    15
    write /sys/devices/system/cpu/cpufreq/policy0/schedutil/freq_margin 30

# device/sprd/mpool/module/darwin/main.rc
on boot
    chmod 0741 /sys/kernel/turbo
    chmod 0741 /sys/module/tran_turbo/parameters
    chown system system /sys/module/tran_turbo/parameters/bhr_opp
    chmod 0666 /sys/module/tran_turbo/parameters/bhr_opp
    chown system system /sys/module/tran_turbo/parameters/bhr
    chmod 0666 /sys/module/tran_turbo/parameters/bhr
    chown system system /sys/module/tran_turbo/parameters/floor_bound
    chmod 0666 /sys/module/tran_turbo/parameters/floor_bound
    chown system system /sys/module/tran_turbo/parameters/kmin
    chmod 0666 /sys/module/tran_turbo/parameters/kmin
    chown system system /sys/kernel/turbo/gearbox/gearbox_fix_fps
    chmod 0666 /sys/kernel/turbo/gearbox/gearbox_fix_fps
    chown system system /sys/kernel/turbo/gearbox/gearbox_fix_fps_comm
    chmod 0666 /sys/kernel/turbo/gearbox/gearbox_fix_fps_comm
    chown system system /sys/kernel/turbo/gearbox/gearbox_tune_error_threshold
    chmod 0666 /sys/kernel/turbo/gearbox/gearbox_tune_error_threshold
    chown system system /sys/kernel/turbo/gearbox/gearbox_tune_quantile
    chmod 0666 /sys/kernel/turbo/gearbox/gearbox_tune_quantile
    chown system system /sys/kernel/turbo/gearbox/gearbox_soft_level
    chmod 0666 /sys/kernel/turbo/gearbox/gearbox_soft_level
    chown system system /sys/kernel/turbo/gearbox/gearbox_fps_list
    chmod 0666 /sys/kernel/turbo/gearbox/gearbox_fps_list
    chown system system /sys/kernel/turbo/hybrid/boost_ta
    chmod 0666 /sys/kernel/turbo/hybrid/boost_ta
    chown system system /sys/kernel/turbo/gearbox/margin_mode
    chmod 0666 /sys/kernel/turbo/gearbox/margin_mode
    chown system system /sys/kernel/turbo/gearbox/margin_mode_dbnc_a
    chmod 0666 /sys/kernel/turbo/gearbox/margin_mode_dbnc_a
    chown system system /sys/kernel/turbo/gearbox/margin_mode_dbnc_b
    chmod 0666 /sys/kernel/turbo/gearbox/margin_mode_dbnc_b
    chown system system /sys/module/tran_turbo/parameters/rescue_percent
    chmod 0666 /sys/module/tran_turbo/parameters/rescue_percent
    chown system system /sys/module/tran_turbo/parameters/rescue_percent_90
    chmod 0666 /sys/module/tran_turbo/parameters/rescue_percent_90
    chown system system /sys/module/tran_turbo/parameters/rescue_percent_120
    chmod 0666 /sys/module/tran_turbo/parameters/rescue_percent_120
    chown system system /sys/module/tran_turbo/parameters/rescue_enhance_f
    chmod 0666 /sys/module/tran_turbo/parameters/rescue_enhance_f
    chown system system /sys/module/tran_turbo/parameters/rescue_opp_c
    chmod 0666 /sys/module/tran_turbo/parameters/rescue_opp_c
    chown system system /sys/module/tran_turbo/parameters/rescue_opp_f
    chmod 0666 /sys/module/tran_turbo/parameters/rescue_opp_f
    chown system system /sys/kernel/turbo/hybrid/ultra_rescue
    chmod 0666 /sys/kernel/turbo/hybrid/ultra_rescue
    chown system system /sys/module/tran_turbo/parameters/deqtime_bound
    chmod 0666 /sys/module/tran_turbo/parameters/deqtime_bound
    chown system system /sys/module/tran_turbo/parameters/short_rescue_ns
    chmod 0666 /sys/module/tran_turbo/parameters/short_rescue_ns
    chown system system /sys/module/tran_turbo/parameters/min_rescue_percent
    chmod 0666 /sys/module/tran_turbo/parameters/min_rescue_percent
    chown system system /sys/module/tran_turbo/parameters/adjust_loading
    chmod 0666 /sys/module/tran_turbo/parameters/adjust_loading
    chown system system /sys/module/tran_turbo/parameters/loading_adj_cnt
    chmod 0666 /sys/module/tran_turbo/parameters/loading_adj_cnt
    chown system system /sys/module/tran_turbo/parameters/loading_debnc_cnt
    chmod 0666 /sys/module/tran_turbo/parameters/loading_debnc_cnt
    chown system system /sys/module/tran_turbo/parameters/loading_time_diff
    chmod 0666 /sys/module/tran_turbo/parameters/loading_time_diff
    chown system system /sys/module/tran_turbo/parameters/loading_th
    chmod 0666 /sys/module/tran_turbo/parameters/loading_th
    chown system system /sys/kernel/turbo/hybrid/llf_task_policy
    chmod 0666 /sys/kernel/turbo/hybrid/llf_task_policy
    chown system system /sys/kernel/turbo/hybrid/light_loading_policy
    chmod 0666 /sys/kernel/turbo/hybrid/light_loading_policy
    chown system system /sys/kernel/turbo/hybrid/switch_idleprefer
    chmod 0666 /sys/kernel/turbo/hybrid/switch_idleprefer
    chown system system /sys/kernel/turbo/hybrid/forecast_rescue_list
    chmod 0666 /sys/kernel/turbo/hybrid/forecast_rescue_list
    chown system system /sys/kernel/turbo/hybrid/forecast_rescue_enable
    chmod 0666 /sys/kernel/turbo/hybrid/forecast_rescue_enable
    chown system system /sys/kernel/turbo/hybrid/forecast_switch_release_freq
    chmod 0666 /sys/kernel/turbo/hybrid/forecast_switch_release_freq
    chown system system /sys/kernel/turbo/common/turbo_enable
    chmod 0666 /sys/kernel/turbo/common/turbo_enable
    chown system system /sys/kernel/turbo/common/systrace_mask
    chmod 0666 /sys/kernel/turbo/common/systrace_mask
    chown system system /sys/kernel/turbo/hybrid/policy0_min_freq
    chmod 0666 /sys/kernel/turbo/hybrid/policy0_min_freq
    chown system system /sys/kernel/turbo/hybrid/policy0_max_freq
    chmod 0666 /sys/kernel/turbo/hybrid/policy0_max_freq
    chown system system /sys/kernel/turbo/hybrid/policy6_min_freq
    chmod 0666 /sys/kernel/turbo/hybrid/policy6_min_freq
    chown system system /sys/kernel/turbo/hybrid/policy6_max_freq
    chmod 0666 /sys/kernel/turbo/hybrid/policy6_max_freq

on early-boot
    insmod /vendor/lib/modules/tran_turbo.ko
    insmod /vendor/lib/modules/tran_monitor.ko
    insmod /vendor/lib/modules/tran_fpsmgr.ko
    insmod /vendor/lib/modules/turbo_engine.ko
# device/sprd/mpool/module/app/settings/main.rc
on post-fs
    chmod 0775 /mnt/vendor
    chown system system /mnt/vendor
# device/sprd/mpool/module/debug/main.rc
on boot
#for sysdump
    chown system system /proc/sprd_sysdump

on early-boot
    # ETB info file
    chown system system /dev/tmc_etb
    chmod 660 /dev/tmc_etb
    chmod 0660 /dev/sprd_bm
    chmod 0660 /dev/dmc_mpu
    chown system system /dev/sprd_bm
    chown system system /dev/dmc_mpu

service bugreport /system/bin/dumpstate -d -p -z -B \
        -o /data/data/com.android.shell/files/bugreports/bugreport
    class late_start
    disabled
    oneshot

# device/sprd/mpool/module/engpc/main.rc
on post-fs-data
#modify permission for voicetrigger dev
    chown system  audio /dev/rt5512
    chmod 660     /dev/rt5512
#modify for tof calibration
    chmod 666 /mnt/vendor/vl53l0_offset_calibration.file
    chmod 666 /mnt/vendor/vl53l0_xtak_calibration.file
#modify for ams calibration
    chmod 666 /mnt/vendor/productinfo/tcs3430_calibration.txt
    mkdir /data/vendor/local/englog 0777

# device/sprd/mpool/module/partition/main.rc
on fs
    mount_all /vendor/etc/fstab.${ro.hardware} --early

on late-fs
    # Wait for keymaster
    exec_start wait_for_keymaster
    mount_all /vendor/etc/fstab.${ro.hardware} --late

# device/sprd/mpool/module/net/main.rc
on early-init
    #set MEMLOCK resource limit 8M
    setrlimit 8 0x7fffff 0x7fffff

on boot
    write /proc/sys/net/core/rmem_max 8388608
    write /proc/sys/net/core/rmem_default 8388608
    #bug 713396 expand the wmem buffer for adb uplink test
    write /proc/sys/net/core/wmem_max 4194304
    write /proc/sys/net/core/wmem_default 2097152
# device/sprd/mpool/module/log/ylog/main.rc
on early-init
    mkdir /dev/socket/ylog 0755 system system
    mkdir /dev/socket/ylog_lite 0755 system system

on post-fs-data
    mkdir /data/vendor/ylog 0770 shell system
    mkdir /data/vendor/ylog_lite 0777
    mkdir /data/vendor/local/slogmodem 0770 shell system
    mkdir /data/vendor/local/mlogservice 0770 shell system
    mkdir /data/vendor/mlog 0777

on property:persist.vendor.ylog_lite.enabled=1
    start vendor.ylog_lite

on property:persist.vendor.ylog_lite.enabled=0
    stop vendor.ylog_lite
# device/sprd/mpool/module/art/mversion/full/full.rc
on early-init && property:ro.boot.ddrsize.range="[0,512)"
   setprop dalvik.vm.foreground-heap-growth-multiplier 1.0
   setprop dalvik.vm.heapstartsize 5m
   setprop dalvik.vm.heapsize 32m
   setprop dalvik.vm.heaptargetutilization 0.75
   setprop dalvik.vm.heapminfree 512k
   setprop dalvik.vm.heapmaxfree 2m

on early-init && property:ro.boot.ddrsize.range="[512,1024)"
   setprop dalvik.vm.foreground-heap-growth-multiplier 1.0
   setprop dalvik.vm.heapstartsize 5m
   setprop dalvik.vm.heapgrowthlimit 128m
   setprop dalvik.vm.heapsize 256m
   setprop dalvik.vm.heaptargetutilization 0.75
   setprop dalvik.vm.heapminfree 512k
   setprop dalvik.vm.heapmaxfree 2m

on early-init && property:ro.boot.ddrsize.range="[1024,2048)"
   setprop dalvik.vm.heapstartsize 8m
   setprop dalvik.vm.heapgrowthlimit 128m
   setprop dalvik.vm.heapsize 256m
   setprop dalvik.vm.heaptargetutilization 0.75
   setprop dalvik.vm.heapminfree 512k
   setprop dalvik.vm.heapmaxfree 8m

on early-init && property:ro.boot.ddrsize.range="[2048,3072)"
   setprop dalvik.vm.heapstartsize 8m
   setprop dalvik.vm.heapgrowthlimit 192m
   setprop dalvik.vm.heapsize 512m
   setprop dalvik.vm.heaptargetutilization 0.75
   setprop dalvik.vm.heapminfree 512k
   setprop dalvik.vm.heapmaxfree 8m

on early-init && property:ro.boot.ddrsize.range="[3072,4096)"
   setprop dalvik.vm.heapstartsize 8m
   setprop dalvik.vm.heapgrowthlimit 192m
   setprop dalvik.vm.heapsize 512m
   setprop dalvik.vm.heaptargetutilization 0.75
   setprop dalvik.vm.heapminfree 512k
   setprop dalvik.vm.heapmaxfree 8m

on early-init && property:ro.boot.ddrsize.range="[4096,5120)"
   setprop dalvik.vm.heapstartsize 8m
   setprop dalvik.vm.heapgrowthlimit 192m
   setprop dalvik.vm.heapsize 512m
   setprop dalvik.vm.heaptargetutilization 0.6
   setprop dalvik.vm.heapminfree 8m
   setprop dalvik.vm.heapmaxfree 16m

on early-init && property:ro.boot.ddrsize.range="[5120,6144)"
   setprop dalvik.vm.heapstartsize 8m
   setprop dalvik.vm.heapgrowthlimit 192m
   setprop dalvik.vm.heapsize 512m
   setprop dalvik.vm.heaptargetutilization 0.6
   setprop dalvik.vm.heapminfree 8m
   setprop dalvik.vm.heapmaxfree 16m

on early-init && property:ro.boot.ddrsize.range="[6144,)"
   setprop dalvik.vm.heapstartsize 16m
   setprop dalvik.vm.heapgrowthlimit 256m
   setprop dalvik.vm.heapsize 512m
   setprop dalvik.vm.heaptargetutilization 0.5
   setprop dalvik.vm.heapminfree 8m
   setprop dalvik.vm.heapmaxfree 32m
# device/sprd/mpool/module/fs/main.rc
on boot
# block I/O vm.dirty parameters
    chmod 644 /proc/reserve_space/black_list
    chmod 644 /proc/reserve_space/white_list
    chmod 644 /proc/reserve_space/black_list_comm
    chmod 640 /proc/reserve_space/white_list_comm
    chmod 644 /proc/reserve_space/app_guid
    write /proc/reserve_space/black_list "1001,1002,1005,1006,1012,1013,1022,1023,1024,1025,2000,9999,"
    write /proc/reserve_space/white_list "1061,10000,10023,10074,10075,"
    write /proc/reserve_space/black_list_comm "slog,ylog,"
    write /proc/reserve_space/white_list_comm "AndroidTestSuit,"
    write /proc/reserve_space/app_guid "10000"
